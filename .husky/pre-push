echo "ğŸ›¡ï¸  Running pre-push security checks..."

# 1. VÃ©rifie que le code est propre et que les types sont corrects
echo "\nğŸ” Running local checks (lint, format, types)..."
npm run check:all
if [ $? -ne 0 ]; then
  echo "\n\x1b[31mâŒ Local checks failed. Please fix the issues before pushing.\x1b[0m"
  exit 1
fi

# 2. VÃ©rifie les dÃ©pendances pour des vulnÃ©rabilitÃ©s de haute sÃ©vÃ©ritÃ©
echo "\nğŸ” Checking for vulnerable dependencies..."
npm audit --audit-level=high

echo "\n\x1b[32mâœ… Pre-push checks passed. Pushing to remote...\x1b[0m"

# Si l'une des commandes ci-dessus Ã©choue, le push sera automatiquement annulÃ©.